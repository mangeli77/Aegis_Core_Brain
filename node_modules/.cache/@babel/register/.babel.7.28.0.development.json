{"{\"assumptions\":{},\"sourceRoot\":\"/Users/Aegis/Aegis/tools/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/Aegis/Aegis\",\"filename\":\"/Users/Aegis/Aegis/tools/rewire-imports.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Aegis/Aegis\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.28.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = transformer;\n/**\n * Codemod: rewrite imports from:\n *  'cognition/…' -> 'core/cognition/…'\n *  'voice/…'     -> 'core/voice/…'\n * Handles ESM import and CommonJS require.\n */\nfunction transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n  const rewrite = v => v.startsWith('cognition/') ? v.replace(/^cognition\\//, 'core/cognition/') : v.startsWith('voice/') ? v.replace(/^voice\\//, 'core/voice/') : v;\n  root.find(j.ImportDeclaration).forEach(p => {\n    const src = p.value.source && p.value.source.value;\n    if (typeof src === 'string') p.value.source.value = rewrite(src);\n  });\n  root.find(j.CallExpression, {\n    callee: {\n      name: 'require'\n    }\n  }).forEach(p => {\n    var _p$value$arguments;\n    const a = (_p$value$arguments = p.value.arguments) === null || _p$value$arguments === void 0 ? void 0 : _p$value$arguments[0];\n    if (a && a.type === 'Literal' && typeof a.value === 'string') {\n      a.value = rewrite(a.value);\n    }\n  });\n  return root.toSource({\n    quote: 'single'\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0cmFuc2Zvcm1lciIsImZpbGUiLCJhcGkiLCJqIiwianNjb2Rlc2hpZnQiLCJyb290Iiwic291cmNlIiwicmV3cml0ZSIsInYiLCJzdGFydHNXaXRoIiwicmVwbGFjZSIsImZpbmQiLCJJbXBvcnREZWNsYXJhdGlvbiIsImZvckVhY2giLCJwIiwic3JjIiwidmFsdWUiLCJDYWxsRXhwcmVzc2lvbiIsImNhbGxlZSIsIm5hbWUiLCJfcCR2YWx1ZSRhcmd1bWVudHMiLCJhIiwiYXJndW1lbnRzIiwidHlwZSIsInRvU291cmNlIiwicXVvdGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9BZWdpcy9BZWdpcy90b29scy8iLCJzb3VyY2VzIjpbInJld2lyZS1pbXBvcnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29kZW1vZDogcmV3cml0ZSBpbXBvcnRzIGZyb206XG4gKiAgJ2NvZ25pdGlvbi/igKYnIC0+ICdjb3JlL2NvZ25pdGlvbi/igKYnXG4gKiAgJ3ZvaWNlL+KApicgICAgIC0+ICdjb3JlL3ZvaWNlL+KApidcbiAqIEhhbmRsZXMgRVNNIGltcG9ydCBhbmQgQ29tbW9uSlMgcmVxdWlyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNmb3JtZXIoZmlsZSwgYXBpKSB7XG4gIGNvbnN0IGogPSBhcGkuanNjb2Rlc2hpZnQ7XG4gIGNvbnN0IHJvb3QgPSBqKGZpbGUuc291cmNlKTtcbiAgY29uc3QgcmV3cml0ZSA9IHYgPT5cbiAgICB2LnN0YXJ0c1dpdGgoJ2NvZ25pdGlvbi8nKSA/IHYucmVwbGFjZSgvXmNvZ25pdGlvblxcLy8sICdjb3JlL2NvZ25pdGlvbi8nKVxuICAgIDogdi5zdGFydHNXaXRoKCd2b2ljZS8nKSAgID8gdi5yZXBsYWNlKC9edm9pY2VcXC8vLCAnY29yZS92b2ljZS8nKVxuICAgIDogdjtcblxuICByb290LmZpbmQoai5JbXBvcnREZWNsYXJhdGlvbikuZm9yRWFjaChwID0+IHtcbiAgICBjb25zdCBzcmMgPSBwLnZhbHVlLnNvdXJjZSAmJiBwLnZhbHVlLnNvdXJjZS52YWx1ZTtcbiAgICBpZiAodHlwZW9mIHNyYyA9PT0gJ3N0cmluZycpIHAudmFsdWUuc291cmNlLnZhbHVlID0gcmV3cml0ZShzcmMpO1xuICB9KTtcblxuICByb290LmZpbmQoai5DYWxsRXhwcmVzc2lvbiwgeyBjYWxsZWU6IHsgbmFtZTogJ3JlcXVpcmUnIH0gfSkuZm9yRWFjaChwID0+IHtcbiAgICBjb25zdCBhID0gcC52YWx1ZS5hcmd1bWVudHM/LlswXTtcbiAgICBpZiAoYSAmJiBhLnR5cGUgPT09ICdMaXRlcmFsJyAmJiB0eXBlb2YgYS52YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGEudmFsdWUgPSByZXdyaXRlKGEudmFsdWUpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJvb3QudG9Tb3VyY2UoeyBxdW90ZTogJ3NpbmdsZScgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLFNBQVNBLFdBQVdBLENBQUNDLElBQUksRUFBRUMsR0FBRyxFQUFFO0VBQzdDLE1BQU1DLENBQUMsR0FBR0QsR0FBRyxDQUFDRSxXQUFXO0VBQ3pCLE1BQU1DLElBQUksR0FBR0YsQ0FBQyxDQUFDRixJQUFJLENBQUNLLE1BQU0sQ0FBQztFQUMzQixNQUFNQyxPQUFPLEdBQUdDLENBQUMsSUFDZkEsQ0FBQyxDQUFDQyxVQUFVLENBQUMsWUFBWSxDQUFDLEdBQUdELENBQUMsQ0FBQ0UsT0FBTyxDQUFDLGNBQWMsRUFBRSxpQkFBaUIsQ0FBQyxHQUN2RUYsQ0FBQyxDQUFDQyxVQUFVLENBQUMsUUFBUSxDQUFDLEdBQUtELENBQUMsQ0FBQ0UsT0FBTyxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsR0FDL0RGLENBQUM7RUFFTEgsSUFBSSxDQUFDTSxJQUFJLENBQUNSLENBQUMsQ0FBQ1MsaUJBQWlCLENBQUMsQ0FBQ0MsT0FBTyxDQUFDQyxDQUFDLElBQUk7SUFDMUMsTUFBTUMsR0FBRyxHQUFHRCxDQUFDLENBQUNFLEtBQUssQ0FBQ1YsTUFBTSxJQUFJUSxDQUFDLENBQUNFLEtBQUssQ0FBQ1YsTUFBTSxDQUFDVSxLQUFLO0lBQ2xELElBQUksT0FBT0QsR0FBRyxLQUFLLFFBQVEsRUFBRUQsQ0FBQyxDQUFDRSxLQUFLLENBQUNWLE1BQU0sQ0FBQ1UsS0FBSyxHQUFHVCxPQUFPLENBQUNRLEdBQUcsQ0FBQztFQUNsRSxDQUFDLENBQUM7RUFFRlYsSUFBSSxDQUFDTSxJQUFJLENBQUNSLENBQUMsQ0FBQ2MsY0FBYyxFQUFFO0lBQUVDLE1BQU0sRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBVTtFQUFFLENBQUMsQ0FBQyxDQUFDTixPQUFPLENBQUNDLENBQUMsSUFBSTtJQUFBLElBQUFNLGtCQUFBO0lBQ3hFLE1BQU1DLENBQUMsSUFBQUQsa0JBQUEsR0FBR04sQ0FBQyxDQUFDRSxLQUFLLENBQUNNLFNBQVMsY0FBQUYsa0JBQUEsdUJBQWpCQSxrQkFBQSxDQUFvQixDQUFDLENBQUM7SUFDaEMsSUFBSUMsQ0FBQyxJQUFJQSxDQUFDLENBQUNFLElBQUksS0FBSyxTQUFTLElBQUksT0FBT0YsQ0FBQyxDQUFDTCxLQUFLLEtBQUssUUFBUSxFQUFFO01BQzVESyxDQUFDLENBQUNMLEtBQUssR0FBR1QsT0FBTyxDQUFDYyxDQUFDLENBQUNMLEtBQUssQ0FBQztJQUM1QjtFQUNGLENBQUMsQ0FBQztFQUVGLE9BQU9YLElBQUksQ0FBQ21CLFFBQVEsQ0FBQztJQUFFQyxLQUFLLEVBQUU7RUFBUyxDQUFDLENBQUM7QUFDM0MiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["transformer","file","api","j","jscodeshift","root","source","rewrite","v","startsWith","replace","find","ImportDeclaration","forEach","p","src","value","CallExpression","callee","name","_p$value$arguments","a","arguments","type","toSource","quote"],"sourceRoot":"/Users/Aegis/Aegis/tools/","sources":["rewire-imports.js"],"sourcesContent":["/**\n * Codemod: rewrite imports from:\n *  'cognition/…' -> 'core/cognition/…'\n *  'voice/…'     -> 'core/voice/…'\n * Handles ESM import and CommonJS require.\n */\nexport default function transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n  const rewrite = v =>\n    v.startsWith('cognition/') ? v.replace(/^cognition\\//, 'core/cognition/')\n    : v.startsWith('voice/')   ? v.replace(/^voice\\//, 'core/voice/')\n    : v;\n\n  root.find(j.ImportDeclaration).forEach(p => {\n    const src = p.value.source && p.value.source.value;\n    if (typeof src === 'string') p.value.source.value = rewrite(src);\n  });\n\n  root.find(j.CallExpression, { callee: { name: 'require' } }).forEach(p => {\n    const a = p.value.arguments?.[0];\n    if (a && a.type === 'Literal' && typeof a.value === 'string') {\n      a.value = rewrite(a.value);\n    }\n  });\n\n  return root.toSource({ quote: 'single' });\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,WAAWA,CAACC,IAAI,EAAEC,GAAG,EAAE;EAC7C,MAAMC,CAAC,GAAGD,GAAG,CAACE,WAAW;EACzB,MAAMC,IAAI,GAAGF,CAAC,CAACF,IAAI,CAACK,MAAM,CAAC;EAC3B,MAAMC,OAAO,GAAGC,CAAC,IACfA,CAAC,CAACC,UAAU,CAAC,YAAY,CAAC,GAAGD,CAAC,CAACE,OAAO,CAAC,cAAc,EAAE,iBAAiB,CAAC,GACvEF,CAAC,CAACC,UAAU,CAAC,QAAQ,CAAC,GAAKD,CAAC,CAACE,OAAO,CAAC,UAAU,EAAE,aAAa,CAAC,GAC/DF,CAAC;EAELH,IAAI,CAACM,IAAI,CAACR,CAAC,CAACS,iBAAiB,CAAC,CAACC,OAAO,CAACC,CAAC,IAAI;IAC1C,MAAMC,GAAG,GAAGD,CAAC,CAACE,KAAK,CAACV,MAAM,IAAIQ,CAAC,CAACE,KAAK,CAACV,MAAM,CAACU,KAAK;IAClD,IAAI,OAAOD,GAAG,KAAK,QAAQ,EAAED,CAAC,CAACE,KAAK,CAACV,MAAM,CAACU,KAAK,GAAGT,OAAO,CAACQ,GAAG,CAAC;EAClE,CAAC,CAAC;EAEFV,IAAI,CAACM,IAAI,CAACR,CAAC,CAACc,cAAc,EAAE;IAAEC,MAAM,EAAE;MAAEC,IAAI,EAAE;IAAU;EAAE,CAAC,CAAC,CAACN,OAAO,CAACC,CAAC,IAAI;IAAA,IAAAM,kBAAA;IACxE,MAAMC,CAAC,IAAAD,kBAAA,GAAGN,CAAC,CAACE,KAAK,CAACM,SAAS,cAAAF,kBAAA,uBAAjBA,kBAAA,CAAoB,CAAC,CAAC;IAChC,IAAIC,CAAC,IAAIA,CAAC,CAACE,IAAI,KAAK,SAAS,IAAI,OAAOF,CAAC,CAACL,KAAK,KAAK,QAAQ,EAAE;MAC5DK,CAAC,CAACL,KAAK,GAAGT,OAAO,CAACc,CAAC,CAACL,KAAK,CAAC;IAC5B;EACF,CAAC,CAAC;EAEF,OAAOX,IAAI,CAACmB,QAAQ,CAAC;IAAEC,KAAK,EAAE;EAAS,CAAC,CAAC;AAC3C","ignoreList":[]}},"mtime":1754893114791},"{\"assumptions\":{},\"sourceRoot\":\"/Users/Aegis/Aegis/tools/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/Aegis/Aegis\",\"filename\":\"/Users/Aegis/Aegis/tools/rewire-imports-v3.mjs\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Aegis/Aegis\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.28.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = transformer;\n/**\n * Rewrites ANY import/require path that points to voice/ or cognition/\n * - 'voice/…'            -> 'core/voice/…'\n * - 'cognition/…'        -> 'core/cognition/…'\n * - './voice/…'          -> './core/voice/…'\n * - '../…/voice/…'       -> '../…/core/voice/…'\n * - same for cognition\n * We only touch string literals in import/require.\n */\nfunction transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n  const fix = s => {\n    if (typeof s !== 'string') return s;\n    if (s.includes('/core/voice') || s.includes('/core/cognition')) return s;\n    // bare\n    if (s.startsWith('voice/')) return s.replace(/^voice\\//, 'core/voice/');\n    if (s.startsWith('cognition/')) return s.replace(/^cognition\\//, 'core/cognition/');\n    // ./ or ../\n    s = s.replace(/(^|\\/)(\\.+\\/)*voice\\//, m => m.replace('voice/', 'core/voice/'));\n    s = s.replace(/(^|\\/)(\\.+\\/)*cognition\\//, m => m.replace('cognition/', 'core/cognition/'));\n    return s;\n  };\n\n  // ESM imports/export-from\n  root.find(j.ImportDeclaration).forEach(p => {\n    p.value.source.value = fix(p.value.source.value);\n  });\n  root.find(j.ExportAllDeclaration).forEach(p => {\n    if (p.value.source) p.value.source.value = fix(p.value.source.value);\n  });\n  root.find(j.ExportNamedDeclaration).forEach(p => {\n    if (p.value.source) p.value.source.value = fix(p.value.source.value);\n  });\n\n  // CommonJS\n  root.find(j.CallExpression, {\n    callee: {\n      name: 'require'\n    }\n  }).forEach(p => {\n    var _p$value$arguments;\n    const a = (_p$value$arguments = p.value.arguments) === null || _p$value$arguments === void 0 ? void 0 : _p$value$arguments[0];\n    if (a && a.type === 'Literal') a.value = fix(a.value);\n  });\n  return root.toSource({\n    quote: 'single'\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0cmFuc2Zvcm1lciIsImZpbGUiLCJhcGkiLCJqIiwianNjb2Rlc2hpZnQiLCJyb290Iiwic291cmNlIiwiZml4IiwicyIsImluY2x1ZGVzIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJtIiwiZmluZCIsIkltcG9ydERlY2xhcmF0aW9uIiwiZm9yRWFjaCIsInAiLCJ2YWx1ZSIsIkV4cG9ydEFsbERlY2xhcmF0aW9uIiwiRXhwb3J0TmFtZWREZWNsYXJhdGlvbiIsIkNhbGxFeHByZXNzaW9uIiwiY2FsbGVlIiwibmFtZSIsIl9wJHZhbHVlJGFyZ3VtZW50cyIsImEiLCJhcmd1bWVudHMiLCJ0eXBlIiwidG9Tb3VyY2UiLCJxdW90ZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL0FlZ2lzL0FlZ2lzL3Rvb2xzLyIsInNvdXJjZXMiOlsicmV3aXJlLWltcG9ydHMtdjMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmV3cml0ZXMgQU5ZIGltcG9ydC9yZXF1aXJlIHBhdGggdGhhdCBwb2ludHMgdG8gdm9pY2UvIG9yIGNvZ25pdGlvbi9cbiAqIC0gJ3ZvaWNlL+KApicgICAgICAgICAgICAtPiAnY29yZS92b2ljZS/igKYnXG4gKiAtICdjb2duaXRpb24v4oCmJyAgICAgICAgLT4gJ2NvcmUvY29nbml0aW9uL+KApidcbiAqIC0gJy4vdm9pY2Uv4oCmJyAgICAgICAgICAtPiAnLi9jb3JlL3ZvaWNlL+KApidcbiAqIC0gJy4uL+KApi92b2ljZS/igKYnICAgICAgIC0+ICcuLi/igKYvY29yZS92b2ljZS/igKYnXG4gKiAtIHNhbWUgZm9yIGNvZ25pdGlvblxuICogV2Ugb25seSB0b3VjaCBzdHJpbmcgbGl0ZXJhbHMgaW4gaW1wb3J0L3JlcXVpcmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybWVyKGZpbGUsIGFwaSkge1xuICBjb25zdCBqID0gYXBpLmpzY29kZXNoaWZ0O1xuICBjb25zdCByb290ID0gaihmaWxlLnNvdXJjZSk7XG5cbiAgY29uc3QgZml4ID0gKHMpID0+IHtcbiAgICBpZiAodHlwZW9mIHMgIT09ICdzdHJpbmcnKSByZXR1cm4gcztcbiAgICBpZiAocy5pbmNsdWRlcygnL2NvcmUvdm9pY2UnKSB8fCBzLmluY2x1ZGVzKCcvY29yZS9jb2duaXRpb24nKSkgcmV0dXJuIHM7XG4gICAgLy8gYmFyZVxuICAgIGlmIChzLnN0YXJ0c1dpdGgoJ3ZvaWNlLycpKSAgICAgIHJldHVybiBzLnJlcGxhY2UoL152b2ljZVxcLy8sICdjb3JlL3ZvaWNlLycpO1xuICAgIGlmIChzLnN0YXJ0c1dpdGgoJ2NvZ25pdGlvbi8nKSkgIHJldHVybiBzLnJlcGxhY2UoL15jb2duaXRpb25cXC8vLCAnY29yZS9jb2duaXRpb24vJyk7XG4gICAgLy8gLi8gb3IgLi4vXG4gICAgcyA9IHMucmVwbGFjZSgvKF58XFwvKShcXC4rXFwvKSp2b2ljZVxcLy8sICAgICAobSkgPT4gbS5yZXBsYWNlKCd2b2ljZS8nLCAnY29yZS92b2ljZS8nKSk7XG4gICAgcyA9IHMucmVwbGFjZSgvKF58XFwvKShcXC4rXFwvKSpjb2duaXRpb25cXC8vLCAobSkgPT4gbS5yZXBsYWNlKCdjb2duaXRpb24vJywgJ2NvcmUvY29nbml0aW9uLycpKTtcbiAgICByZXR1cm4gcztcbiAgfTtcblxuICAvLyBFU00gaW1wb3J0cy9leHBvcnQtZnJvbVxuICByb290LmZpbmQoai5JbXBvcnREZWNsYXJhdGlvbikuZm9yRWFjaChwID0+IHsgcC52YWx1ZS5zb3VyY2UudmFsdWUgPSBmaXgocC52YWx1ZS5zb3VyY2UudmFsdWUpOyB9KTtcbiAgcm9vdC5maW5kKGouRXhwb3J0QWxsRGVjbGFyYXRpb24pLmZvckVhY2gocCA9PiB7IGlmIChwLnZhbHVlLnNvdXJjZSkgcC52YWx1ZS5zb3VyY2UudmFsdWUgPSBmaXgocC52YWx1ZS5zb3VyY2UudmFsdWUpOyB9KTtcbiAgcm9vdC5maW5kKGouRXhwb3J0TmFtZWREZWNsYXJhdGlvbikuZm9yRWFjaChwID0+IHsgaWYgKHAudmFsdWUuc291cmNlKSBwLnZhbHVlLnNvdXJjZS52YWx1ZSA9IGZpeChwLnZhbHVlLnNvdXJjZS52YWx1ZSk7IH0pO1xuXG4gIC8vIENvbW1vbkpTXG4gIHJvb3QuZmluZChqLkNhbGxFeHByZXNzaW9uLCB7IGNhbGxlZTogeyBuYW1lOiAncmVxdWlyZScgfSB9KS5mb3JFYWNoKHAgPT4ge1xuICAgIGNvbnN0IGEgPSBwLnZhbHVlLmFyZ3VtZW50cz8uWzBdO1xuICAgIGlmIChhICYmIGEudHlwZSA9PT0gJ0xpdGVyYWwnKSBhLnZhbHVlID0gZml4KGEudmFsdWUpO1xuICB9KTtcblxuICByZXR1cm4gcm9vdC50b1NvdXJjZSh7IHF1b3RlOiAnc2luZ2xlJyB9KTtcbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLFNBQVNBLFdBQVdBLENBQUNDLElBQUksRUFBRUMsR0FBRyxFQUFFO0VBQzdDLE1BQU1DLENBQUMsR0FBR0QsR0FBRyxDQUFDRSxXQUFXO0VBQ3pCLE1BQU1DLElBQUksR0FBR0YsQ0FBQyxDQUFDRixJQUFJLENBQUNLLE1BQU0sQ0FBQztFQUUzQixNQUFNQyxHQUFHLEdBQUlDLENBQUMsSUFBSztJQUNqQixJQUFJLE9BQU9BLENBQUMsS0FBSyxRQUFRLEVBQUUsT0FBT0EsQ0FBQztJQUNuQyxJQUFJQSxDQUFDLENBQUNDLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSUQsQ0FBQyxDQUFDQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsRUFBRSxPQUFPRCxDQUFDO0lBQ3hFO0lBQ0EsSUFBSUEsQ0FBQyxDQUFDRSxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQU8sT0FBT0YsQ0FBQyxDQUFDRyxPQUFPLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQztJQUM1RSxJQUFJSCxDQUFDLENBQUNFLFVBQVUsQ0FBQyxZQUFZLENBQUMsRUFBRyxPQUFPRixDQUFDLENBQUNHLE9BQU8sQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLENBQUM7SUFDcEY7SUFDQUgsQ0FBQyxHQUFHQSxDQUFDLENBQUNHLE9BQU8sQ0FBQyx1QkFBdUIsRUFBT0MsQ0FBQyxJQUFLQSxDQUFDLENBQUNELE9BQU8sQ0FBQyxRQUFRLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDckZILENBQUMsR0FBR0EsQ0FBQyxDQUFDRyxPQUFPLENBQUMsMkJBQTJCLEVBQUdDLENBQUMsSUFBS0EsQ0FBQyxDQUFDRCxPQUFPLENBQUMsWUFBWSxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFDN0YsT0FBT0gsQ0FBQztFQUNWLENBQUM7O0VBRUQ7RUFDQUgsSUFBSSxDQUFDUSxJQUFJLENBQUNWLENBQUMsQ0FBQ1csaUJBQWlCLENBQUMsQ0FBQ0MsT0FBTyxDQUFDQyxDQUFDLElBQUk7SUFBRUEsQ0FBQyxDQUFDQyxLQUFLLENBQUNYLE1BQU0sQ0FBQ1csS0FBSyxHQUFHVixHQUFHLENBQUNTLENBQUMsQ0FBQ0MsS0FBSyxDQUFDWCxNQUFNLENBQUNXLEtBQUssQ0FBQztFQUFFLENBQUMsQ0FBQztFQUNsR1osSUFBSSxDQUFDUSxJQUFJLENBQUNWLENBQUMsQ0FBQ2Usb0JBQW9CLENBQUMsQ0FBQ0gsT0FBTyxDQUFDQyxDQUFDLElBQUk7SUFBRSxJQUFJQSxDQUFDLENBQUNDLEtBQUssQ0FBQ1gsTUFBTSxFQUFFVSxDQUFDLENBQUNDLEtBQUssQ0FBQ1gsTUFBTSxDQUFDVyxLQUFLLEdBQUdWLEdBQUcsQ0FBQ1MsQ0FBQyxDQUFDQyxLQUFLLENBQUNYLE1BQU0sQ0FBQ1csS0FBSyxDQUFDO0VBQUUsQ0FBQyxDQUFDO0VBQ3pIWixJQUFJLENBQUNRLElBQUksQ0FBQ1YsQ0FBQyxDQUFDZ0Isc0JBQXNCLENBQUMsQ0FBQ0osT0FBTyxDQUFDQyxDQUFDLElBQUk7SUFBRSxJQUFJQSxDQUFDLENBQUNDLEtBQUssQ0FBQ1gsTUFBTSxFQUFFVSxDQUFDLENBQUNDLEtBQUssQ0FBQ1gsTUFBTSxDQUFDVyxLQUFLLEdBQUdWLEdBQUcsQ0FBQ1MsQ0FBQyxDQUFDQyxLQUFLLENBQUNYLE1BQU0sQ0FBQ1csS0FBSyxDQUFDO0VBQUUsQ0FBQyxDQUFDOztFQUUzSDtFQUNBWixJQUFJLENBQUNRLElBQUksQ0FBQ1YsQ0FBQyxDQUFDaUIsY0FBYyxFQUFFO0lBQUVDLE1BQU0sRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBVTtFQUFFLENBQUMsQ0FBQyxDQUFDUCxPQUFPLENBQUNDLENBQUMsSUFBSTtJQUFBLElBQUFPLGtCQUFBO0lBQ3hFLE1BQU1DLENBQUMsSUFBQUQsa0JBQUEsR0FBR1AsQ0FBQyxDQUFDQyxLQUFLLENBQUNRLFNBQVMsY0FBQUYsa0JBQUEsdUJBQWpCQSxrQkFBQSxDQUFvQixDQUFDLENBQUM7SUFDaEMsSUFBSUMsQ0FBQyxJQUFJQSxDQUFDLENBQUNFLElBQUksS0FBSyxTQUFTLEVBQUVGLENBQUMsQ0FBQ1AsS0FBSyxHQUFHVixHQUFHLENBQUNpQixDQUFDLENBQUNQLEtBQUssQ0FBQztFQUN2RCxDQUFDLENBQUM7RUFFRixPQUFPWixJQUFJLENBQUNzQixRQUFRLENBQUM7SUFBRUMsS0FBSyxFQUFFO0VBQVMsQ0FBQyxDQUFDO0FBQzNDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["transformer","file","api","j","jscodeshift","root","source","fix","s","includes","startsWith","replace","m","find","ImportDeclaration","forEach","p","value","ExportAllDeclaration","ExportNamedDeclaration","CallExpression","callee","name","_p$value$arguments","a","arguments","type","toSource","quote"],"sourceRoot":"/Users/Aegis/Aegis/tools/","sources":["rewire-imports-v3.mjs"],"sourcesContent":["/**\n * Rewrites ANY import/require path that points to voice/ or cognition/\n * - 'voice/…'            -> 'core/voice/…'\n * - 'cognition/…'        -> 'core/cognition/…'\n * - './voice/…'          -> './core/voice/…'\n * - '../…/voice/…'       -> '../…/core/voice/…'\n * - same for cognition\n * We only touch string literals in import/require.\n */\nexport default function transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n\n  const fix = (s) => {\n    if (typeof s !== 'string') return s;\n    if (s.includes('/core/voice') || s.includes('/core/cognition')) return s;\n    // bare\n    if (s.startsWith('voice/'))      return s.replace(/^voice\\//, 'core/voice/');\n    if (s.startsWith('cognition/'))  return s.replace(/^cognition\\//, 'core/cognition/');\n    // ./ or ../\n    s = s.replace(/(^|\\/)(\\.+\\/)*voice\\//,     (m) => m.replace('voice/', 'core/voice/'));\n    s = s.replace(/(^|\\/)(\\.+\\/)*cognition\\//, (m) => m.replace('cognition/', 'core/cognition/'));\n    return s;\n  };\n\n  // ESM imports/export-from\n  root.find(j.ImportDeclaration).forEach(p => { p.value.source.value = fix(p.value.source.value); });\n  root.find(j.ExportAllDeclaration).forEach(p => { if (p.value.source) p.value.source.value = fix(p.value.source.value); });\n  root.find(j.ExportNamedDeclaration).forEach(p => { if (p.value.source) p.value.source.value = fix(p.value.source.value); });\n\n  // CommonJS\n  root.find(j.CallExpression, { callee: { name: 'require' } }).forEach(p => {\n    const a = p.value.arguments?.[0];\n    if (a && a.type === 'Literal') a.value = fix(a.value);\n  });\n\n  return root.toSource({ quote: 'single' });\n}"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,WAAWA,CAACC,IAAI,EAAEC,GAAG,EAAE;EAC7C,MAAMC,CAAC,GAAGD,GAAG,CAACE,WAAW;EACzB,MAAMC,IAAI,GAAGF,CAAC,CAACF,IAAI,CAACK,MAAM,CAAC;EAE3B,MAAMC,GAAG,GAAIC,CAAC,IAAK;IACjB,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE,OAAOA,CAAC;IACnC,IAAIA,CAAC,CAACC,QAAQ,CAAC,aAAa,CAAC,IAAID,CAAC,CAACC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,OAAOD,CAAC;IACxE;IACA,IAAIA,CAAC,CAACE,UAAU,CAAC,QAAQ,CAAC,EAAO,OAAOF,CAAC,CAACG,OAAO,CAAC,UAAU,EAAE,aAAa,CAAC;IAC5E,IAAIH,CAAC,CAACE,UAAU,CAAC,YAAY,CAAC,EAAG,OAAOF,CAAC,CAACG,OAAO,CAAC,cAAc,EAAE,iBAAiB,CAAC;IACpF;IACAH,CAAC,GAAGA,CAAC,CAACG,OAAO,CAAC,uBAAuB,EAAOC,CAAC,IAAKA,CAAC,CAACD,OAAO,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;IACrFH,CAAC,GAAGA,CAAC,CAACG,OAAO,CAAC,2BAA2B,EAAGC,CAAC,IAAKA,CAAC,CAACD,OAAO,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;IAC7F,OAAOH,CAAC;EACV,CAAC;;EAED;EACAH,IAAI,CAACQ,IAAI,CAACV,CAAC,CAACW,iBAAiB,CAAC,CAACC,OAAO,CAACC,CAAC,IAAI;IAAEA,CAAC,CAACC,KAAK,CAACX,MAAM,CAACW,KAAK,GAAGV,GAAG,CAACS,CAAC,CAACC,KAAK,CAACX,MAAM,CAACW,KAAK,CAAC;EAAE,CAAC,CAAC;EAClGZ,IAAI,CAACQ,IAAI,CAACV,CAAC,CAACe,oBAAoB,CAAC,CAACH,OAAO,CAACC,CAAC,IAAI;IAAE,IAAIA,CAAC,CAACC,KAAK,CAACX,MAAM,EAAEU,CAAC,CAACC,KAAK,CAACX,MAAM,CAACW,KAAK,GAAGV,GAAG,CAACS,CAAC,CAACC,KAAK,CAACX,MAAM,CAACW,KAAK,CAAC;EAAE,CAAC,CAAC;EACzHZ,IAAI,CAACQ,IAAI,CAACV,CAAC,CAACgB,sBAAsB,CAAC,CAACJ,OAAO,CAACC,CAAC,IAAI;IAAE,IAAIA,CAAC,CAACC,KAAK,CAACX,MAAM,EAAEU,CAAC,CAACC,KAAK,CAACX,MAAM,CAACW,KAAK,GAAGV,GAAG,CAACS,CAAC,CAACC,KAAK,CAACX,MAAM,CAACW,KAAK,CAAC;EAAE,CAAC,CAAC;;EAE3H;EACAZ,IAAI,CAACQ,IAAI,CAACV,CAAC,CAACiB,cAAc,EAAE;IAAEC,MAAM,EAAE;MAAEC,IAAI,EAAE;IAAU;EAAE,CAAC,CAAC,CAACP,OAAO,CAACC,CAAC,IAAI;IAAA,IAAAO,kBAAA;IACxE,MAAMC,CAAC,IAAAD,kBAAA,GAAGP,CAAC,CAACC,KAAK,CAACQ,SAAS,cAAAF,kBAAA,uBAAjBA,kBAAA,CAAoB,CAAC,CAAC;IAChC,IAAIC,CAAC,IAAIA,CAAC,CAACE,IAAI,KAAK,SAAS,EAAEF,CAAC,CAACP,KAAK,GAAGV,GAAG,CAACiB,CAAC,CAACP,KAAK,CAAC;EACvD,CAAC,CAAC;EAEF,OAAOZ,IAAI,CAACsB,QAAQ,CAAC;IAAEC,KAAK,EAAE;EAAS,CAAC,CAAC;AAC3C","ignoreList":[]}},"mtime":1754895204300},"{\"assumptions\":{},\"sourceRoot\":\"/Users/Aegis/Aegis/tools/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/Aegis/Aegis\",\"filename\":\"/Users/Aegis/Aegis/tools/relativize-core-imports.mjs\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Aegis/Aegis\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.28.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = transformer;\nvar _nodePath = _interopRequireDefault(require(\"node:path\"));\nvar _nodeFs = _interopRequireDefault(require(\"node:fs\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// Convert imports like \"core/voice/...\" to relative paths based on the current file.\n// Works for both ESM (import/export-from) and CJS (require).\n\nfunction transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n  const projectRoot = process.cwd(); // repo root (where you run jscodeshift)\n  const toRel = (fromFile, spec) => {\n    if (typeof spec !== 'string') return spec;\n    if (!spec.startsWith('core/')) return spec; // only touch core/...\n    // Absolute target on disk for the spec:\n    const targetAbs = _nodePath.default.resolve(projectRoot, spec); // e.g., /repo/core/voice/...\n    // Current file’s directory:\n    const fromDir = _nodePath.default.dirname(file.path); // e.g., core/voice/utils\n    const rel = _nodePath.default.relative(fromDir, targetAbs); // eg: ./env_guard.mjs or ../voice/...\n    // Ensure relative form starts with ./ or ../\n    return rel.startsWith('.') ? rel : `./${rel}`;\n  };\n  const fixLiteral = lit => {\n    if (!lit) return;\n    if (lit.type === 'Literal' && typeof lit.value === 'string') {\n      lit.value = toRel(file.path, lit.value);\n    } else if (lit.type === 'StringLiteral') {\n      lit.value = toRel(file.path, lit.value);\n    }\n  };\n\n  // import ... from '...'\n  root.find(j.ImportDeclaration).forEach(p => fixLiteral(p.value.source));\n\n  // export ... from '...'\n  root.find(j.ExportAllDeclaration).forEach(p => p.value.source && fixLiteral(p.value.source));\n  root.find(j.ExportNamedDeclaration).forEach(p => p.value.source && fixLiteral(p.value.source));\n\n  // require('...')\n  root.find(j.CallExpression, {\n    callee: {\n      name: 'require'\n    }\n  }).forEach(p => {\n    var _p$value$arguments;\n    const a = (_p$value$arguments = p.value.arguments) === null || _p$value$arguments === void 0 ? void 0 : _p$value$arguments[0];\n    if (a && (a.type === 'Literal' || a.type === 'StringLiteral')) fixLiteral(a);\n  });\n  return root.toSource({\n    quote: 'single'\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZVBhdGgiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9ub2RlRnMiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ0cmFuc2Zvcm1lciIsImZpbGUiLCJhcGkiLCJqIiwianNjb2Rlc2hpZnQiLCJyb290Iiwic291cmNlIiwicHJvamVjdFJvb3QiLCJwcm9jZXNzIiwiY3dkIiwidG9SZWwiLCJmcm9tRmlsZSIsInNwZWMiLCJzdGFydHNXaXRoIiwidGFyZ2V0QWJzIiwicGF0aCIsInJlc29sdmUiLCJmcm9tRGlyIiwiZGlybmFtZSIsInJlbCIsInJlbGF0aXZlIiwiZml4TGl0ZXJhbCIsImxpdCIsInR5cGUiLCJ2YWx1ZSIsImZpbmQiLCJJbXBvcnREZWNsYXJhdGlvbiIsImZvckVhY2giLCJwIiwiRXhwb3J0QWxsRGVjbGFyYXRpb24iLCJFeHBvcnROYW1lZERlY2xhcmF0aW9uIiwiQ2FsbEV4cHJlc3Npb24iLCJjYWxsZWUiLCJuYW1lIiwiX3AkdmFsdWUkYXJndW1lbnRzIiwiYSIsImFyZ3VtZW50cyIsInRvU291cmNlIiwicXVvdGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9BZWdpcy9BZWdpcy90b29scy8iLCJzb3VyY2VzIjpbInJlbGF0aXZpemUtY29yZS1pbXBvcnRzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb252ZXJ0IGltcG9ydHMgbGlrZSBcImNvcmUvdm9pY2UvLi4uXCIgdG8gcmVsYXRpdmUgcGF0aHMgYmFzZWQgb24gdGhlIGN1cnJlbnQgZmlsZS5cbi8vIFdvcmtzIGZvciBib3RoIEVTTSAoaW1wb3J0L2V4cG9ydC1mcm9tKSBhbmQgQ0pTIChyZXF1aXJlKS5cbmltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgZnMgZnJvbSAnbm9kZTpmcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybWVyKGZpbGUsIGFwaSkge1xuICBjb25zdCBqID0gYXBpLmpzY29kZXNoaWZ0O1xuICBjb25zdCByb290ID0gaihmaWxlLnNvdXJjZSk7XG5cbiAgY29uc3QgcHJvamVjdFJvb3QgPSBwcm9jZXNzLmN3ZCgpOyAvLyByZXBvIHJvb3QgKHdoZXJlIHlvdSBydW4ganNjb2Rlc2hpZnQpXG4gIGNvbnN0IHRvUmVsID0gKGZyb21GaWxlLCBzcGVjKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBzcGVjICE9PSAnc3RyaW5nJykgcmV0dXJuIHNwZWM7XG4gICAgaWYgKCFzcGVjLnN0YXJ0c1dpdGgoJ2NvcmUvJykpIHJldHVybiBzcGVjOyAvLyBvbmx5IHRvdWNoIGNvcmUvLi4uXG4gICAgLy8gQWJzb2x1dGUgdGFyZ2V0IG9uIGRpc2sgZm9yIHRoZSBzcGVjOlxuICAgIGNvbnN0IHRhcmdldEFicyA9IHBhdGgucmVzb2x2ZShwcm9qZWN0Um9vdCwgc3BlYyk7IC8vIGUuZy4sIC9yZXBvL2NvcmUvdm9pY2UvLi4uXG4gICAgLy8gQ3VycmVudCBmaWxl4oCZcyBkaXJlY3Rvcnk6XG4gICAgY29uc3QgZnJvbURpciA9IHBhdGguZGlybmFtZShmaWxlLnBhdGgpOyAgICAgICAgICAvLyBlLmcuLCBjb3JlL3ZvaWNlL3V0aWxzXG4gICAgY29uc3QgcmVsID0gcGF0aC5yZWxhdGl2ZShmcm9tRGlyLCB0YXJnZXRBYnMpOyAgICAvLyBlZzogLi9lbnZfZ3VhcmQubWpzIG9yIC4uL3ZvaWNlLy4uLlxuICAgIC8vIEVuc3VyZSByZWxhdGl2ZSBmb3JtIHN0YXJ0cyB3aXRoIC4vIG9yIC4uL1xuICAgIHJldHVybiByZWwuc3RhcnRzV2l0aCgnLicpID8gcmVsIDogYC4vJHtyZWx9YDtcbiAgfTtcblxuICBjb25zdCBmaXhMaXRlcmFsID0gKGxpdCkgPT4ge1xuICAgIGlmICghbGl0KSByZXR1cm47XG4gICAgaWYgKGxpdC50eXBlID09PSAnTGl0ZXJhbCcgJiYgdHlwZW9mIGxpdC52YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxpdC52YWx1ZSA9IHRvUmVsKGZpbGUucGF0aCwgbGl0LnZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGxpdC50eXBlID09PSAnU3RyaW5nTGl0ZXJhbCcpIHtcbiAgICAgIGxpdC52YWx1ZSA9IHRvUmVsKGZpbGUucGF0aCwgbGl0LnZhbHVlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gaW1wb3J0IC4uLiBmcm9tICcuLi4nXG4gIHJvb3QuZmluZChqLkltcG9ydERlY2xhcmF0aW9uKS5mb3JFYWNoKHAgPT4gZml4TGl0ZXJhbChwLnZhbHVlLnNvdXJjZSkpO1xuXG4gIC8vIGV4cG9ydCAuLi4gZnJvbSAnLi4uJ1xuICByb290LmZpbmQoai5FeHBvcnRBbGxEZWNsYXJhdGlvbikuZm9yRWFjaChwID0+IHAudmFsdWUuc291cmNlICYmIGZpeExpdGVyYWwocC52YWx1ZS5zb3VyY2UpKTtcbiAgcm9vdC5maW5kKGouRXhwb3J0TmFtZWREZWNsYXJhdGlvbikuZm9yRWFjaChwID0+IHAudmFsdWUuc291cmNlICYmIGZpeExpdGVyYWwocC52YWx1ZS5zb3VyY2UpKTtcblxuICAvLyByZXF1aXJlKCcuLi4nKVxuICByb290LmZpbmQoai5DYWxsRXhwcmVzc2lvbiwgeyBjYWxsZWU6IHsgbmFtZTogJ3JlcXVpcmUnIH0gfSkuZm9yRWFjaChwID0+IHtcbiAgICBjb25zdCBhID0gcC52YWx1ZS5hcmd1bWVudHM/LlswXTtcbiAgICBpZiAoYSAmJiAoYS50eXBlID09PSAnTGl0ZXJhbCcgfHwgYS50eXBlID09PSAnU3RyaW5nTGl0ZXJhbCcpKSBmaXhMaXRlcmFsKGEpO1xuICB9KTtcblxuICByZXR1cm4gcm9vdC50b1NvdXJjZSh7IHF1b3RlOiAnc2luZ2xlJyB9KTtcbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBLElBQUFBLFNBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUF5QixTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUh6QjtBQUNBOztBQUllLFNBQVNHLFdBQVdBLENBQUNDLElBQUksRUFBRUMsR0FBRyxFQUFFO0VBQzdDLE1BQU1DLENBQUMsR0FBR0QsR0FBRyxDQUFDRSxXQUFXO0VBQ3pCLE1BQU1DLElBQUksR0FBR0YsQ0FBQyxDQUFDRixJQUFJLENBQUNLLE1BQU0sQ0FBQztFQUUzQixNQUFNQyxXQUFXLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ25DLE1BQU1DLEtBQUssR0FBR0EsQ0FBQ0MsUUFBUSxFQUFFQyxJQUFJLEtBQUs7SUFDaEMsSUFBSSxPQUFPQSxJQUFJLEtBQUssUUFBUSxFQUFFLE9BQU9BLElBQUk7SUFDekMsSUFBSSxDQUFDQSxJQUFJLENBQUNDLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPRCxJQUFJLENBQUMsQ0FBQztJQUM1QztJQUNBLE1BQU1FLFNBQVMsR0FBR0MsaUJBQUksQ0FBQ0MsT0FBTyxDQUFDVCxXQUFXLEVBQUVLLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkQ7SUFDQSxNQUFNSyxPQUFPLEdBQUdGLGlCQUFJLENBQUNHLE9BQU8sQ0FBQ2pCLElBQUksQ0FBQ2MsSUFBSSxDQUFDLENBQUMsQ0FBVTtJQUNsRCxNQUFNSSxHQUFHLEdBQUdKLGlCQUFJLENBQUNLLFFBQVEsQ0FBQ0gsT0FBTyxFQUFFSCxTQUFTLENBQUMsQ0FBQyxDQUFJO0lBQ2xEO0lBQ0EsT0FBT0ssR0FBRyxDQUFDTixVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUdNLEdBQUcsR0FBRyxLQUFLQSxHQUFHLEVBQUU7RUFDL0MsQ0FBQztFQUVELE1BQU1FLFVBQVUsR0FBSUMsR0FBRyxJQUFLO0lBQzFCLElBQUksQ0FBQ0EsR0FBRyxFQUFFO0lBQ1YsSUFBSUEsR0FBRyxDQUFDQyxJQUFJLEtBQUssU0FBUyxJQUFJLE9BQU9ELEdBQUcsQ0FBQ0UsS0FBSyxLQUFLLFFBQVEsRUFBRTtNQUMzREYsR0FBRyxDQUFDRSxLQUFLLEdBQUdkLEtBQUssQ0FBQ1QsSUFBSSxDQUFDYyxJQUFJLEVBQUVPLEdBQUcsQ0FBQ0UsS0FBSyxDQUFDO0lBQ3pDLENBQUMsTUFBTSxJQUFJRixHQUFHLENBQUNDLElBQUksS0FBSyxlQUFlLEVBQUU7TUFDdkNELEdBQUcsQ0FBQ0UsS0FBSyxHQUFHZCxLQUFLLENBQUNULElBQUksQ0FBQ2MsSUFBSSxFQUFFTyxHQUFHLENBQUNFLEtBQUssQ0FBQztJQUN6QztFQUNGLENBQUM7O0VBRUQ7RUFDQW5CLElBQUksQ0FBQ29CLElBQUksQ0FBQ3RCLENBQUMsQ0FBQ3VCLGlCQUFpQixDQUFDLENBQUNDLE9BQU8sQ0FBQ0MsQ0FBQyxJQUFJUCxVQUFVLENBQUNPLENBQUMsQ0FBQ0osS0FBSyxDQUFDbEIsTUFBTSxDQUFDLENBQUM7O0VBRXZFO0VBQ0FELElBQUksQ0FBQ29CLElBQUksQ0FBQ3RCLENBQUMsQ0FBQzBCLG9CQUFvQixDQUFDLENBQUNGLE9BQU8sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNKLEtBQUssQ0FBQ2xCLE1BQU0sSUFBSWUsVUFBVSxDQUFDTyxDQUFDLENBQUNKLEtBQUssQ0FBQ2xCLE1BQU0sQ0FBQyxDQUFDO0VBQzVGRCxJQUFJLENBQUNvQixJQUFJLENBQUN0QixDQUFDLENBQUMyQixzQkFBc0IsQ0FBQyxDQUFDSCxPQUFPLENBQUNDLENBQUMsSUFBSUEsQ0FBQyxDQUFDSixLQUFLLENBQUNsQixNQUFNLElBQUllLFVBQVUsQ0FBQ08sQ0FBQyxDQUFDSixLQUFLLENBQUNsQixNQUFNLENBQUMsQ0FBQzs7RUFFOUY7RUFDQUQsSUFBSSxDQUFDb0IsSUFBSSxDQUFDdEIsQ0FBQyxDQUFDNEIsY0FBYyxFQUFFO0lBQUVDLE1BQU0sRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBVTtFQUFFLENBQUMsQ0FBQyxDQUFDTixPQUFPLENBQUNDLENBQUMsSUFBSTtJQUFBLElBQUFNLGtCQUFBO0lBQ3hFLE1BQU1DLENBQUMsSUFBQUQsa0JBQUEsR0FBR04sQ0FBQyxDQUFDSixLQUFLLENBQUNZLFNBQVMsY0FBQUYsa0JBQUEsdUJBQWpCQSxrQkFBQSxDQUFvQixDQUFDLENBQUM7SUFDaEMsSUFBSUMsQ0FBQyxLQUFLQSxDQUFDLENBQUNaLElBQUksS0FBSyxTQUFTLElBQUlZLENBQUMsQ0FBQ1osSUFBSSxLQUFLLGVBQWUsQ0FBQyxFQUFFRixVQUFVLENBQUNjLENBQUMsQ0FBQztFQUM5RSxDQUFDLENBQUM7RUFFRixPQUFPOUIsSUFBSSxDQUFDZ0MsUUFBUSxDQUFDO0lBQUVDLEtBQUssRUFBRTtFQUFTLENBQUMsQ0FBQztBQUMzQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_nodePath","_interopRequireDefault","require","_nodeFs","e","__esModule","default","transformer","file","api","j","jscodeshift","root","source","projectRoot","process","cwd","toRel","fromFile","spec","startsWith","targetAbs","path","resolve","fromDir","dirname","rel","relative","fixLiteral","lit","type","value","find","ImportDeclaration","forEach","p","ExportAllDeclaration","ExportNamedDeclaration","CallExpression","callee","name","_p$value$arguments","a","arguments","toSource","quote"],"sourceRoot":"/Users/Aegis/Aegis/tools/","sources":["relativize-core-imports.mjs"],"sourcesContent":["// Convert imports like \"core/voice/...\" to relative paths based on the current file.\n// Works for both ESM (import/export-from) and CJS (require).\nimport path from 'node:path';\nimport fs from 'node:fs';\n\nexport default function transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n\n  const projectRoot = process.cwd(); // repo root (where you run jscodeshift)\n  const toRel = (fromFile, spec) => {\n    if (typeof spec !== 'string') return spec;\n    if (!spec.startsWith('core/')) return spec; // only touch core/...\n    // Absolute target on disk for the spec:\n    const targetAbs = path.resolve(projectRoot, spec); // e.g., /repo/core/voice/...\n    // Current file’s directory:\n    const fromDir = path.dirname(file.path);          // e.g., core/voice/utils\n    const rel = path.relative(fromDir, targetAbs);    // eg: ./env_guard.mjs or ../voice/...\n    // Ensure relative form starts with ./ or ../\n    return rel.startsWith('.') ? rel : `./${rel}`;\n  };\n\n  const fixLiteral = (lit) => {\n    if (!lit) return;\n    if (lit.type === 'Literal' && typeof lit.value === 'string') {\n      lit.value = toRel(file.path, lit.value);\n    } else if (lit.type === 'StringLiteral') {\n      lit.value = toRel(file.path, lit.value);\n    }\n  };\n\n  // import ... from '...'\n  root.find(j.ImportDeclaration).forEach(p => fixLiteral(p.value.source));\n\n  // export ... from '...'\n  root.find(j.ExportAllDeclaration).forEach(p => p.value.source && fixLiteral(p.value.source));\n  root.find(j.ExportNamedDeclaration).forEach(p => p.value.source && fixLiteral(p.value.source));\n\n  // require('...')\n  root.find(j.CallExpression, { callee: { name: 'require' } }).forEach(p => {\n    const a = p.value.arguments?.[0];\n    if (a && (a.type === 'Literal' || a.type === 'StringLiteral')) fixLiteral(a);\n  });\n\n  return root.toSource({ quote: 'single' });\n}"],"mappings":"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","ignoreList":[]}},"mtime":1754896212995},"{\"assumptions\":{},\"sourceRoot\":\"/Users/Aegis/Aegis/tools/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/Aegis/Aegis\",\"filename\":\"/Users/Aegis/Aegis/tools/relativize-any-core-imports.mjs\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Aegis/Aegis\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.28.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = transformer;\nvar _nodePath = _interopRequireDefault(require(\"node:path\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\ncat > tools / relativize - any - core - imports.mjs << 'JS';\nfunction transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n  const projectRoot = process.cwd();\n  const fixSpec = spec => {\n    if (!spec || typeof spec.value !== 'string') return;\n    const s = spec.value;\n    const idx = s.indexOf('core/');\n    if (idx < 0) return; // only touch specs that *contain* 'core/'\n    const tail = s.slice(idx); // normalize to 'core/…'\n    const targetAbs = _nodePath.default.resolve(projectRoot, tail);\n    const fromDir = _nodePath.default.dirname(file.path);\n    let rel = _nodePath.default.relative(fromDir, targetAbs).replace(/\\\\/g, '/');\n    if (!rel.startsWith('.')) rel = './' + rel;\n    // collapse things like '././' if they appear\n    rel = rel.replace(/\\/\\.\\//g, '/');\n    spec.value = rel;\n  };\n\n  // ESM: import … from '…'\n  root.find(j.ImportDeclaration).forEach(p => fixSpec(p.value.source));\n\n  // ESM: export … from '…'\n  root.find(j.ExportAllDeclaration).forEach(p => p.value.source && fixSpec(p.value.source));\n  root.find(j.ExportNamedDeclaration).forEach(p => p.value.source && fixSpec(p.value.source));\n\n  // CJS: require('…')\n  root.find(j.CallExpression, {\n    callee: {\n      name: 'require'\n    }\n  }).forEach(p => {\n    var _p$value$arguments;\n    const a = (_p$value$arguments = p.value.arguments) === null || _p$value$arguments === void 0 ? void 0 : _p$value$arguments[0];\n    if (a && (a.type === 'Literal' || a.type === 'StringLiteral')) fixSpec(a);\n  });\n  return root.toSource({\n    quote: 'single'\n  });\n}\nJS;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZVBhdGgiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNhdCIsInRvb2xzIiwicmVsYXRpdml6ZSIsImFueSIsImNvcmUiLCJpbXBvcnRzIiwibWpzIiwidHJhbnNmb3JtZXIiLCJmaWxlIiwiYXBpIiwiaiIsImpzY29kZXNoaWZ0Iiwicm9vdCIsInNvdXJjZSIsInByb2plY3RSb290IiwicHJvY2VzcyIsImN3ZCIsImZpeFNwZWMiLCJzcGVjIiwidmFsdWUiLCJzIiwiaWR4IiwiaW5kZXhPZiIsInRhaWwiLCJzbGljZSIsInRhcmdldEFicyIsInBhdGgiLCJyZXNvbHZlIiwiZnJvbURpciIsImRpcm5hbWUiLCJyZWwiLCJyZWxhdGl2ZSIsInJlcGxhY2UiLCJzdGFydHNXaXRoIiwiZmluZCIsIkltcG9ydERlY2xhcmF0aW9uIiwiZm9yRWFjaCIsInAiLCJFeHBvcnRBbGxEZWNsYXJhdGlvbiIsIkV4cG9ydE5hbWVkRGVjbGFyYXRpb24iLCJDYWxsRXhwcmVzc2lvbiIsImNhbGxlZSIsIm5hbWUiLCJfcCR2YWx1ZSRhcmd1bWVudHMiLCJhIiwiYXJndW1lbnRzIiwidHlwZSIsInRvU291cmNlIiwicXVvdGUiLCJKUyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL0FlZ2lzL0FlZ2lzL3Rvb2xzLyIsInNvdXJjZXMiOlsicmVsYXRpdml6ZS1hbnktY29yZS1pbXBvcnRzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjYXQgPiB0b29scy9yZWxhdGl2aXplLWFueS1jb3JlLWltcG9ydHMubWpzIDw8J0pTJ1xuaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNmb3JtZXIoZmlsZSwgYXBpKSB7XG4gIGNvbnN0IGogPSBhcGkuanNjb2Rlc2hpZnQ7XG4gIGNvbnN0IHJvb3QgPSBqKGZpbGUuc291cmNlKTtcbiAgY29uc3QgcHJvamVjdFJvb3QgPSBwcm9jZXNzLmN3ZCgpO1xuXG4gIGNvbnN0IGZpeFNwZWMgPSAoc3BlYykgPT4ge1xuICAgIGlmICghc3BlYyB8fCB0eXBlb2Ygc3BlYy52YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybjtcbiAgICBjb25zdCBzID0gc3BlYy52YWx1ZTtcbiAgICBjb25zdCBpZHggPSBzLmluZGV4T2YoJ2NvcmUvJyk7XG4gICAgaWYgKGlkeCA8IDApIHJldHVybjsgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSB0b3VjaCBzcGVjcyB0aGF0ICpjb250YWluKiAnY29yZS8nXG4gICAgY29uc3QgdGFpbCA9IHMuc2xpY2UoaWR4KTsgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSB0byAnY29yZS/igKYnXG4gICAgY29uc3QgdGFyZ2V0QWJzID0gcGF0aC5yZXNvbHZlKHByb2plY3RSb290LCB0YWlsKTtcbiAgICBjb25zdCBmcm9tRGlyID0gcGF0aC5kaXJuYW1lKGZpbGUucGF0aCk7XG4gICAgbGV0IHJlbCA9IHBhdGgucmVsYXRpdmUoZnJvbURpciwgdGFyZ2V0QWJzKS5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gICAgaWYgKCFyZWwuc3RhcnRzV2l0aCgnLicpKSByZWwgPSAnLi8nICsgcmVsO1xuICAgIC8vIGNvbGxhcHNlIHRoaW5ncyBsaWtlICcuLy4vJyBpZiB0aGV5IGFwcGVhclxuICAgIHJlbCA9IHJlbC5yZXBsYWNlKC9cXC9cXC5cXC8vZywgJy8nKTtcbiAgICBzcGVjLnZhbHVlID0gcmVsO1xuICB9O1xuXG4gIC8vIEVTTTogaW1wb3J0IOKApiBmcm9tICfigKYnXG4gIHJvb3QuZmluZChqLkltcG9ydERlY2xhcmF0aW9uKS5mb3JFYWNoKHAgPT4gZml4U3BlYyhwLnZhbHVlLnNvdXJjZSkpO1xuXG4gIC8vIEVTTTogZXhwb3J0IOKApiBmcm9tICfigKYnXG4gIHJvb3QuZmluZChqLkV4cG9ydEFsbERlY2xhcmF0aW9uKS5mb3JFYWNoKHAgPT4gcC52YWx1ZS5zb3VyY2UgJiYgZml4U3BlYyhwLnZhbHVlLnNvdXJjZSkpO1xuICByb290LmZpbmQoai5FeHBvcnROYW1lZERlY2xhcmF0aW9uKS5mb3JFYWNoKHAgPT4gcC52YWx1ZS5zb3VyY2UgJiYgZml4U3BlYyhwLnZhbHVlLnNvdXJjZSkpO1xuXG4gIC8vIENKUzogcmVxdWlyZSgn4oCmJylcbiAgcm9vdC5maW5kKGouQ2FsbEV4cHJlc3Npb24sIHsgY2FsbGVlOiB7IG5hbWU6ICdyZXF1aXJlJyB9IH0pLmZvckVhY2gocCA9PiB7XG4gICAgY29uc3QgYSA9IHAudmFsdWUuYXJndW1lbnRzPy5bMF07XG4gICAgaWYgKGEgJiYgKGEudHlwZSA9PT0gJ0xpdGVyYWwnIHx8IGEudHlwZSA9PT0gJ1N0cmluZ0xpdGVyYWwnKSkgZml4U3BlYyhhKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJvb3QudG9Tb3VyY2UoeyBxdW90ZTogJ3NpbmdsZScgfSk7XG59XG5KUyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQTZCLFNBQUFELHVCQUFBRSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRDdCRyxHQUFHLEdBQUdDLEtBQUssR0FBQ0MsVUFBVSxHQUFDQyxHQUFHLEdBQUNDLElBQUksR0FBQ0MsT0FBTyxDQUFDQyxHQUFHLElBQUcsSUFBSTtBQUduQyxTQUFTQyxXQUFXQSxDQUFDQyxJQUFJLEVBQUVDLEdBQUcsRUFBRTtFQUM3QyxNQUFNQyxDQUFDLEdBQUdELEdBQUcsQ0FBQ0UsV0FBVztFQUN6QixNQUFNQyxJQUFJLEdBQUdGLENBQUMsQ0FBQ0YsSUFBSSxDQUFDSyxNQUFNLENBQUM7RUFDM0IsTUFBTUMsV0FBVyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0VBRWpDLE1BQU1DLE9BQU8sR0FBSUMsSUFBSSxJQUFLO0lBQ3hCLElBQUksQ0FBQ0EsSUFBSSxJQUFJLE9BQU9B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","map":{"version":3,"names":["_nodePath","_interopRequireDefault","require","e","__esModule","default","cat","tools","relativize","any","core","imports","mjs","transformer","file","api","j","jscodeshift","root","source","projectRoot","process","cwd","fixSpec","spec","value","s","idx","indexOf","tail","slice","targetAbs","path","resolve","fromDir","dirname","rel","relative","replace","startsWith","find","ImportDeclaration","forEach","p","ExportAllDeclaration","ExportNamedDeclaration","CallExpression","callee","name","_p$value$arguments","a","arguments","type","toSource","quote","JS"],"sourceRoot":"/Users/Aegis/Aegis/tools/","sources":["relativize-any-core-imports.mjs"],"sourcesContent":["cat > tools/relativize-any-core-imports.mjs <<'JS'\nimport path from 'node:path';\n\nexport default function transformer(file, api) {\n  const j = api.jscodeshift;\n  const root = j(file.source);\n  const projectRoot = process.cwd();\n\n  const fixSpec = (spec) => {\n    if (!spec || typeof spec.value !== 'string') return;\n    const s = spec.value;\n    const idx = s.indexOf('core/');\n    if (idx < 0) return;                      // only touch specs that *contain* 'core/'\n    const tail = s.slice(idx);                 // normalize to 'core/…'\n    const targetAbs = path.resolve(projectRoot, tail);\n    const fromDir = path.dirname(file.path);\n    let rel = path.relative(fromDir, targetAbs).replace(/\\\\/g, '/');\n    if (!rel.startsWith('.')) rel = './' + rel;\n    // collapse things like '././' if they appear\n    rel = rel.replace(/\\/\\.\\//g, '/');\n    spec.value = rel;\n  };\n\n  // ESM: import … from '…'\n  root.find(j.ImportDeclaration).forEach(p => fixSpec(p.value.source));\n\n  // ESM: export … from '…'\n  root.find(j.ExportAllDeclaration).forEach(p => p.value.source && fixSpec(p.value.source));\n  root.find(j.ExportNamedDeclaration).forEach(p => p.value.source && fixSpec(p.value.source));\n\n  // CJS: require('…')\n  root.find(j.CallExpression, { callee: { name: 'require' } }).forEach(p => {\n    const a = p.value.arguments?.[0];\n    if (a && (a.type === 'Literal' || a.type === 'StringLiteral')) fixSpec(a);\n  });\n\n  return root.toSource({ quote: 'single' });\n}\nJS"],"mappings":"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","ignoreList":[]}},"mtime":1754897088544}}